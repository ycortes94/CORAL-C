{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = aggsReducer;\n\nvar _constants = require('../constants');\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction aggsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments[1];\n\n  if (action.type === _constants.UPDATE_AGGS) {\n    if (action.append) {\n      var field = Object.keys(state[action.component])[0];\n\n      var _action$aggregations$ = action.aggregations[field],\n          newBuckets = _action$aggregations$.buckets,\n          aggsData = _objectWithoutProperties(_action$aggregations$, ['buckets']);\n\n      return _extends({}, state, _defineProperty({}, action.component, _defineProperty({}, field, _extends({\n        buckets: [].concat(_toConsumableArray(state[action.component][field].buckets), _toConsumableArray(newBuckets))\n      }, aggsData))));\n    }\n\n    return _extends({}, state, _defineProperty({}, action.component, action.aggregations));\n  } else if (action.type === _constants.REMOVE_COMPONENT) {\n    var del = state[action.component],\n        obj = _objectWithoutProperties(state, [action.component]);\n\n    return obj;\n  }\n\n  return state;\n}","map":null,"metadata":{},"sourceType":"script"}